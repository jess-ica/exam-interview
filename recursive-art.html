<script src="https://cdnjs.cloudflare.com/ajax/libs/p5.js/0.10.2/p5.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/p5.js/0.10.2/addons/p5.sound.min.js"></script>

<script>
  new p5();
  
  function setup() {
    createCanvas(400, 400);
    ellipseMode(CENTER);
    rectMode(CENTER);
    angleMode(DEGREES);
  }

  var drawShape = function(level, radius, angleStart, angleEnd) {   
      resetMatrix();
      translate(width/2,height/2);
      var angleMiddle = (angleStart+angleEnd)/2;
      rotate(angleMiddle);

      var size = 200/(level+2);

      fill( (level % 3)*80,215,(level % 2)*227,125);

      if ( (level % 2) === 1)  {
          rect(   radius, -69, size*2, size);
      }
      else {
          ellipse(radius, -40, size, size*2);
      }

      var newRadius = radius+35;

      var newLevel  = level+1;

      if (angleEnd - angleStart >= 20) {
          drawShape(newLevel, newRadius, angleStart,  angleMiddle);
          drawShape(newLevel, newRadius, angleMiddle, angleEnd);
      }
  };

  function draw () {
    background(255, 255, 255);
    resetMatrix();
    drawShape(0, 0, 0, 360);
  }



</script>
